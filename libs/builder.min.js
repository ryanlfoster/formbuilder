/************************************************
 *												*
 *		Project: formbuilder 					*
 *		Created by: Tjebbe Lievens				*
 *		https://github.com/TPWeb/formbuilder	*
 *												*
 *		JavaScript JQuery builder lib 			*
 *												*
 ************************************************/
 
!function($){$.fn.extend({FormBuilder:function(options){function generateXML(){var str="<formulier>";return $(".formbuilder section").each(function(i){str+="<section>",$(this).find(".row").each(function(i){str+="<row>",$(this).find(".colomn").each(function(i){var colomn=$(this),field=FIELD[$(this).attr("data-name")];str+="<colomn>";var width=0;for(i=1;12>=i;i++)colomn.hasClass("col-md-"+i)&&(width=i);if(str+="<width>"+width+"</width>",void 0!==field&&void 0!==field.name){str+="<field>"+$(this).attr("data-name")+"</field>";var settings=field.options.split(",");if($.each(settings,function(e,a){var t="";void 0!==colomn.attr("data-frm-"+a)&&(t=colomn.attr("data-frm-"+a)),str+="<"+a+">"+t+"</"+a+">"}),("select"==colomn.attr("data-name")||"checkbox"==colomn.attr("data-name")||"radio"==colomn.attr("data-name"))&&void 0!==colomn.attr("data-frm-multi")){var json=eval("("+colomn.attr("data-frm-multi")+")");$.each(json,function(e,a){str+="<multi><value>"+a.value+"</value><label>"+a.label+"</label></multi>"})}}str+="</colomn>"}),str+="</row>"}),str+="</section>"}),str+="</formulier>"}function generateHTML(){var form="<form></form>";return form=$(form),$(".formbuilder section").each(function(i){var section=$("<section></section>");$(this).find(".row").each(function(i){var row=$('<div class="row"></div>');$(this).find(".colomn").each(function(i){for(var field=FIELD[$(this).attr("data-name")],width="col-md-12",colomn=$(this),i=1;12>=i;i++)$(this).hasClass("col-md-"+i)&&(width="col-md-"+i);var c=$('<div class="'+width+'"></div>');if(void 0!==field&&void 0!==field.name){var settings=field.options.split(","),html=field.field;if($.each(settings,function(e,a){html=html.replace("{"+a+"}",colomn.attr("data-frm-"+a))}),$(c).append(html),$.each(settings,function(e,a){void 0!==colomn.attr("data-frm-"+a)&&($(c).find("input").attr(a,colomn.attr("data-frm-"+a)),$(c).find("select").attr(a,colomn.attr("data-frm-"+a)),$(c).find("textarea").attr(a,colomn.attr("data-frm-"+a)))}),"select"==colomn.attr("data-name")){var json="[";$(c).find("select").html("");var j=eval("("+colomn.attr("data-frm-multi")+")");$.each(j,function(e,a){json+="{'label':'"+a.label+"', 'value':'"+a.value+"'},",$(c).find("select").append('<option value="'+a.value+'">'+a.label+"</option>")}),json+="]"}else if("checkbox"==colomn.attr("data-name")){var json="[";$(c).find("input").remove();var j=eval("("+colomn.attr("data-frm-multi")+")");$.each(j,function(e,a){json+="{'label':'"+a.label+"', 'value':'"+a.value+"'},",$(c).append('<label><input type="checkbox" name="'+colomn.attr("data-frm-name")+'[]" value="'+a.value+'">'+a.label+"</label>")}),json+="]"}else if("radio"==colomn.attr("data-name")){var json="[";$(c).find("input").remove();var j=eval("("+colomn.attr("data-frm-multi")+")");$.each(j,function(e,a){json+="{'label':'"+a.label+"', 'value':'"+a.value+"'},",$(c).append('<label><input type="radio" name="'+colomn.attr("data-frm-name")+'" value="'+a.value+'">'+a.label+"</label>")}),json+="]"}}row.append(c)}),section.append(row)}),form.append(section)}),'<form action="'+defaults.formUrl+'" method="POST">'+form.html()+"</form>"}function loadXML(){var e=$.parseXML(defaults.xml),a="";$(e).find("formulier").each(function(){$(this).find("section").each(function(){var e=$(defaults.existSection);$(this).find("row").each(function(){var a=($(this),$(defaults.newRow));a.find(".colomn").remove(),$(this).find("colomn").each(function(){var e=$(this),t=FIELD[e.find("field").text()];if(void 0!==t&&void 0!==t.name){var l=$('<div class="col-md-'+e.find("width").text()+' colomn"></div>');l.attr("data-name",e.find("field").text());var n=t.options.split(","),i=t.field;if($.each(n,function(a,t){i=i.replace("{"+t+"}",e.find(t).eq(0).text()),void 0!==l.attr("data-frm-"+t)&&($(i).find("input").attr(t,e.find(t).eq(0).text()),$(i).find("select").attr(t,e.find(t).eq(0).text()),$(i).find("textarea").attr(t,e.find(t).eq(0).text())),l.attr("data-frm-"+t,e.find(t).eq(0).text())}),l.append(i),"select"==e.find("field").text()){var o="[";$(l).find("select").html(""),e.find("multi").each(function(){o+="{'label':'"+$(this).find("label").text()+"', 'value':'"+$(this).find("value").text()+"'},",$(l).find("select").append('<option value="'+$(this).find("value").text()+'">'+$(this).find("label").text()+"</option>")}),o+="]",$(l).attr("data-frm-multi",o)}else if("checkbox"==e.find("field").text()){var o="[";$(l).find("input").remove(),$(e).find("multi").each(function(){o+="{'label':'"+$(this).find("label").text()+"', 'value':'"+$(this).find("value").text()+"'},",$(l).append('<label><input type="checkbox" name="'+l.attr("data-frm-name")+'[]" value="'+$(this).find("value").text()+'">'+$(this).find("label").text()+"</label>")}),o+="]",$(l).attr("data-frm-multi",o)}else if("radio"==e.find("field").text()){var o="[";$(l).find("input").remove(),$(e).find("multi").each(function(){o+="{'label':'"+$(this).find("label").text()+"', 'value':'"+$(this).find("value").text()+"'},",$(l).append('<label><input type="radio" name="'+l.attr("data-frm-name")+'" value="'+$(this).find("value").text()+'">'+$(this).find("label").text()+"</label>")}),o+="]",$(l).attr("data-frm-multi",o)}a.append(l)}}),e.append(a)}),a+="<section>"+e.html()+"</section>"})}),$(".formbuilder").html(a)}function loadSettings(){var frm=$(".formbuilder .colomn.active"),field=FIELD[frm.attr("data-name")];if(void 0!==field&&void 0!==field.name){$(".settings").show(),$(".settings > table tr").hide(),$(".settings .multi").hide(),$(".settings .multi tr:gt(0)").remove();var settings=field.options.split(",");if($.each(settings,function(e,a){"required"==a?("required"==frm.attr("data-frm-"+a)?($(".settings [data-settings="+a+"] input").attr("checked",!0),$(".settings [data-settings="+a+"] select").attr("checked",!0),$(".settings [data-settings="+a+"] textarea").attr("checked",!0)):($(".settings [data-settings="+a+"] input").attr("checked",!1),$(".settings [data-settings="+a+"] select").attr("checked",!1),$(".settings [data-settings="+a+"] textarea").attr("checked",!1)),$(".settings [data-settings="+a+"]").show()):$(".settings [data-settings="+a+"]").show().find("input").val(frm.attr("data-frm-"+a))}),"select"==frm.attr("data-name")||"checkbox"==frm.attr("data-name")||"radio"==frm.attr("data-name"))if($(".settings .multi").show(),void 0!==frm.attr("data-frm-multi")){var json=eval("("+frm.attr("data-frm-multi")+")");$.each(json,function(e,a){$(".settings .multi table").append('<tr><td><input type="text" name="m-label" value="'+a.label+'"></td><td><input type="text" name="m-value"  value="'+a.value+'"></td></tr>')})}else $(".settings .multi table").append('<tr><td><input type="text" name="m-label"></td><td><input type="text" name="m-value"></td></tr>')}else $(".settings").hide()}function setSettings(e,a){var t=$(".formbuilder .colomn.active"),l=FIELD[t.attr("data-name")];if(void 0!==l&&void 0!==l.name){var n=l.options.split(",");$.each(n,function(l,n){n==e&&t.attr("data-frm-"+n,a)}),createForm(t.attr("data-name"))}}function createForm(e){var a=$(".formbuilder .colomn.active"),t=FIELD[e];if(void 0!==t&&void 0!==t.name){a.html(createFieldA(t.options,t.field));for(var l=t.options.split(","),n=0;n<l.length;n++){var i=a.attr("data-frm-"+l[n]);void 0==i&&(i=""),a.attr("data-frm-"+l[n],i),a.find("input").attr(l[n],i),a.find("select").attr(l[n],i),a.find("textarea").attr(l[n],i)}a.attr("data-name",e)}}function createField(e,a){var t=a;return $.each(e,function(e,a){t=t.replace("{"+e+"}",a)}),t}function createFieldA(e,a){for(var t=$(".formbuilder .colomn.active"),l=a,n=e.split(","),i=0;i<n.length;i++){var o=t.attr("data-frm-"+n[i]);void 0==o&&(o="",("name"==n[i]||"label"==n[i])&&(o=n[i])),l=l.replace("{"+n[i]+"}",o),t.attr("data-frm-"+n[i],o)}return l}function setAttr(e,a){$.each(e,function(e,t){a.attr("data-frm-"+e,t)})}function generateFullHTML(){var e="";if(0==defaults.basicHTMLUrl.length){var a=defaults.basicHTML.split("{form}");e=a[0]+generateHTML()+a[1]}else $.get(defaults.basicHTMLUrl,function(a){var t=a.split("{form}");e=t[0]+generateHTML()+t[1]});return e}function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function push_to_server(publish){if("couchdb"==defaults.database.database){$.couch.urlPrefix=defaults.database.server,defaults.database.username.length>0&&$.couch.login({name:defaults.database.username,password:defaults.database.password});var db=$.couch.db(defaults.database.dbname),data={_id:defaults.formId,html:generateFullHTML(),xml:generateXML(),publish:publish};null!=defaults.formRev&&void 0!==defaults.formRev&&defaults.formRev.length>0&&(data._rev=defaults.formRev),db.saveDoc(data,{success:function(e){defaults.formRev=e._rev,alert(1==publish?"Formulier is gepubliseerd!":"Formulier is opgeslagen")},error:function(){alert("Kan formulier niet opslaan.")}})}else"couchdbproxy"==defaults.database.database?$.ajax({url:defaults.database.server+"/?action=createdatabase",type:"POST",crossDomain:!0,data:{dbname:defaults.database.dbname},success:function(res){var r=eval("("+res+")");1==r.ok||"file_exists"==r.error||r.db_name==defaults.database.dbname?(str=0==defaults.formRev.length?{publish:publish,xml:generateXML(),html:generateFullHTML()}:{publish:publish,_rev:defaults.formRev,xml:generateXML(),html:generateFullHTML()},$.ajax({url:defaults.database.server+"/?action=createdocument&dbname="+defaults.database.dbname+"&id="+defaults.formId,type:"POST",data:str,success:function(res){var r=eval("("+res+")");alert(r.id==defaults.formId?1==publish?"Formulier is gepubliseerd!":"Formulier is opgeslagen":"Fout tijdens opslagen van formulier.")},error:function(){alert("Kan formulier niet opslaan.")}})):alert("Fout tijdens aanmaken database")},error:function(){alert("Kan geen connectie maken met server.")}}):"couchbase"==defaults.database.database?$.ajax({url:defaults.database.server+"/"+defaults.database.dbname,type:"GET",crossDomain:!0,success:function(res){var r=eval("("+res+")");str=0==defaults.formRev.length?{publish:publish,xml:generateXML(),html:generateFullHTML()}:{publish:publish,_rev:defaults.formRev,xml:generateXML(),html:generateFullHTML()},$.ajax({url:defaults.database.server+"/"+defaults.database.dbname+"/"+defaults.formId,type:"PUT",data:str,success:function(res){var r=eval("("+res+")");alert(r.id==defaults.formId&&r.ok?1==publish?"Formulier is gepubliseerd!":"Formulier is opgeslagen":"Fout tijdens opslagen van formulier.")},error:function(){alert("Kan formulier niet opslaan.")},dataType:"json"})},error:function(){alert("Kan geen connectie maken met server.")},dataType:"json"}):alert("No database connected!")}var defaults={INPUT_TYPES:["submit","nextbutton","prevbutton","hidden","text","textarea","password","email","url","select","checkbox","radio","number","range","tel","color","date","datetime","time","month","week","h1","h2","h3","h4","p"],preview:!1,newRow:'<div class="row"><a href="javascript:void(0);" class="addColomn">Voeg colom toe</a><br><div class="col-md-12 colomn"></div></div>',newSection:'<section><a href="javascript:void();" class="addRow">add row</a><br><div class="row"><a href="javascript:void(0);" class="addColomn">Voeg colom toe</a><br><div class="col-md-12 colomn active" data-frm-label="label" data-name="h1"><h1>label</h1></div></div></section>',existSection:'<section><a href="javascript:void();" class="addRow">add row</a><br></section>',formUrl:"submit.html",xml:"",database:{database:"couchdb",dbname:"formbuilder",username:"",password:"",server:"http://127.0.0.1:5984"},saveTo:"",formId:"",formRev:"",basicHTML:'<!doctype html><html lang="en"><head><meta charset="UTF-8"><title></title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"><script src="https://code.jquery.com/jquery-2.1.0.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script src="https://rawgit.com/TPWeb/formbuilder/master/libs/viewer.min.js"></script></head><body><div class="container">{form}</div></body></html>',basicHTMLUrl:""},CONTAINER=$(this),FORM=$(this).find(".formbuilder"),FIELD=new Array;FIELD.text={name:"tekst veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="text" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="text" name="" value="Hier komt de tekst">',options:"name,label,value,placeholder,required,maxlength"},FIELD.password={name:"wachtwoord veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="password" name="{name}" value="" class="form-control"></div>',preview:'<input type="password" name="" value="Hier komt de tekst">',options:"name,label,placeholder,required"},FIELD.email={name:"E-mail veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="email" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="email" name="" value="example@example.com">',options:"name,label,value,placeholder,required"},FIELD.url={name:"url veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="url" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="email" name="" value="http://www.example.com">',options:"name,label,value,placeholder,required"},FIELD.submit={name:"Verzend knop",field:'<div class="form-group"><input type="submit" value="{value}" class="btn btn-primary"></div>',preview:'<input type="submit" value="Verzenden">',options:"value"},FIELD.nextbutton={name:"Volgende knop",field:'<div class="form-group"><input type="submit" value="{value}" class="btn btn-primary next"></div>',preview:'<input type="submit" value="Volgende">',options:"value"},FIELD.prevbutton={name:"Vorige knop",field:'<div class="form-group"><input type="submit" value="{value}" class="btn btn-primary prev"></div>',preview:'<input type="submit" value="Vorige">',options:"value"},FIELD.select={name:"Keuze lijst",field:'<div class="form-group"><label for="{name}">{label}</label><select name="{name}" class="form-control">{option}</select></div>',preview:'<label for="">Keuze lijst:</label><select name=""><option value="">Optie 1</option><optino value="">Optie 2</option></select>',options:"name,label,required"},FIELD.checkbox={name:"Keuze vakjes",field:'<div class="form-group"><label for="{name}">{label}</label></div>',preview:'<label for="">Keuze vakjes:</label><label for=""><input type="checkbox" name="" value="checkbox"> vakje1</label><label for=""><input type="checkbox" name="" value="checkbox"> vakje2</label>',options:"name,label"},FIELD.radio={name:"Keuze rondjes",field:'<div class="form-group"><label for="{name}">{label}</label></div>',preview:'<label for="">Keuze rondjes:</label><label for=""><input type="radio" name="" value="radio"> rondje1</label><label for=""><input type="radio" name="" value="radio"> rondje2</label>',options:"name,label"},FIELD.hidden={name:"Verborgen veld",field:'<input type="hidden" name="{name}" value="{value}">',preview:'<input type="hidden" name="{name}" value="{value}">',options:"name,value"},FIELD.textarea={name:"groot tekst veld",field:'<div class="form-group"><label for="{name}">{label}</label><textarea name="{name}" class="form-control">{value}</textarea></div>',preview:'<textarea name="{name}" class="form-control">Hier komt je tekst</textarea>',options:"name,label,value,placeholder,required"},FIELD.number={name:"nummer veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="number" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="number" name="" value="23">',options:"name,label,value,placeholder,required,max,min"},FIELD.date={name:"datum veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="date" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="date" name="" value="2014-01-01">',options:"name,label,value,placeholder,required"},FIELD.datetime={name:"datum en tijd veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="datetime" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="date" name="" value="2014-01-01 12:00:00">',options:"name,label,value,placeholder,required"},FIELD.time={name:"tijd veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="time" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="time" name="" value="12:00:00">',options:"name,label,value,placeholder,required"},FIELD.range={name:"range veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="range" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="range" name="" value="10" min="0" max="30">',options:"name,label,value,placeholder,required,min,max"},FIELD.color={name:"kleur veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="color" name="{name}" class="form-control"></div>',preview:'<input type="color" name="">',options:"name,label,placeholder,required"},FIELD.month={name:"maand veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="month" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="color" name="">',options:"name,label,value,placeholder,required"},FIELD.week={name:"week veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="week" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="week" name="" value="">',options:"name,label,value,placeholder,required"},FIELD.tel={name:"telefoon veld",field:'<div class="form-group"><label for="{name}">{label}</label><input type="tel" name="{name}" value="{value}" class="form-control"></div>',preview:'<input type="tel" name="" value="">',options:"name,label,value,placeholder,required"},FIELD.h1={name:"Heading 1",field:"<h1>{label}</h1>",preview:"<h1>Heading 1</h1>",options:"label"},FIELD.h2={name:"Heading 2",field:"<h2>{label}</h2>",preview:"<h2>Heading 2</h2>",options:"label"},FIELD.h3={name:"Heading 3",field:"<h3>{label}</h3>",preview:"<h3>Heading 3</h3>",options:"label"},FIELD.h4={name:"Heading 4",field:"<h4>{label}</h4>",preview:"<h4>Heading 4</h4>",options:"label"},FIELD.p={name:"Paragraph",field:"<p>{label}</p>",preview:"<p>Hier komt je tekst</p>",options:"label"};var options=$.extend(defaults,options),selectedIndex=0,selectedElement="";defaults.xml.length>0&&loadXML(),0==defaults.formId.length&&(defaults.formId=guid()),$.each(defaults.INPUT_TYPES,function(e,a){var t=FIELD[a];void 0!==t&&void 0!==t.name&&CONTAINER.find(".input").append('<li data-name="'+a+'">'+t.name+"</li>")}),$(".addSection").click(function(e){e.preventDefault();var a=$(defaults.newSection);$(".formbuilder").append(a)}),$(".formbuilder").on("click",".addRow",function(e){e.preventDefault();var a=$(defaults.newRow);$(this).parent().append(a),$(".colomn").removeClass("active"),a.find(".colomn").addClass("active")}),$(".formbuilder").on("click",".addColomn",function(e){e.preventDefault();var a=$(this).parent().find("div.colomn").length;a++;var t="col-md-"+Math.floor(12/a),l=$(this).parent().find(".colomn");l.removeClass("col-md-1"),l.removeClass("col-md-2"),l.removeClass("col-md-3"),l.removeClass("col-md-4"),l.removeClass("col-md-5"),l.removeClass("col-md-6"),l.removeClass("col-md-7"),l.removeClass("col-md-8"),l.removeClass("col-md-9"),l.removeClass("col-md-10"),l.removeClass("col-md-11"),l.removeClass("col-md-12"),l.addClass(t),$(this).parent().append('<div class="'+t+' colomn"></div>')}),$(".formbuilder").on("click",".colomn",function(e){e.preventDefault(),$(".colomn").removeClass("active"),$(this).addClass("active"),loadSettings()}),$(".input").on("click","li",function(e){if(e.preventDefault(),$(".formbuilder .colomn.active").length>0){var a=$(this).attr("data-name"),t=FIELD[a];void 0!==t&&void 0!==t.name&&(createForm(a),loadSettings())}}),$(".settings > input[type=submit]").click(function(e){e.preventDefault();var a=$(".formbuilder .colomn.active"),t=FIELD[a.attr("data-name")];if(void 0!==t&&void 0!==t.name){var l=t.options.split(",");if($.each(l,function(e,a){"required"==a?$("input[name=required]").is(":checked")?setSettings("required","required"):setSettings("required","false"):setSettings(a,$(".settings [name="+a+"]").val())}),"select"==a.attr("data-name")){var n="[";a.find("select").html(""),$(".settings .multi table tr:gt(0)").each(function(){n+="{'label':'"+$(this).find("[name=m-label]").val()+"', 'value':'"+$(this).find("[name=m-value]").val()+"'},",a.find("select").append('<option value="'+$(this).find("[name=m-value]").val()+'">'+$(this).find("[name=m-label]").val()+"</option>")}),n+="]",a.attr("data-frm-multi",n)}else if("checkbox"==a.attr("data-name")){var n="[";a.find("input").remove(),$(".settings .multi table tr:gt(0)").each(function(){n+="{'label':'"+$(this).find("[name=m-label]").val()+"', 'value':'"+$(this).find("[name=m-value]").val()+"'},",a.append('<label><input type="checkbox" name="'+$(".settings [name=name]").val()+'[]" value="'+$(this).find("[name=m-value]").val()+'">'+$(this).find("[name=m-label]").val()+"</label>")}),n+="]",a.attr("data-frm-multi",n)}else if("radio"==a.attr("data-name")){var n="[";a.find("input").remove(),$(".settings .multi table tr:gt(0)").each(function(){n+="{'label':'"+$(this).find("[name=m-label]").val()+"', 'value':'"+$(this).find("[name=m-value]").val()+"'},",a.append('<label><input type="radio" name="'+$(".settings [name=name]").val()+'" value="'+$(this).find("[name=m-value]").val()+'">'+$(this).find("[name=m-label]").val()+"</label>")}),n+="]",a.attr("data-frm-multi",n)}}}),$(".settings .multi input[type=submit]").click(function(e){e.preventDefault(),$(".multi table").append('<tr><td><input type="text" name="m-label"></td><td><input type="text" name="m-value"></td></tr>')}),$("input[type=submit].xml").click(function(e){e.preventDefault(),alert(generateXML())}),$("input[type=submit].html").click(function(e){e.preventDefault(),alert(generateHTML())}),$("input[type=submit].importxml").click(function(e){e.preventDefault(),defaults.xml=$('textarea[name="importxml"]').val(),loadXML()}),$("input[type=submit].save").click(function(e){e.preventDefault(),push_to_server(0)}),$("input[type=submit].publish").click(function(e){e.preventDefault(),push_to_server(1)}),$(".formbuilder").on("mouseenter",".colomn",function(){$(this).append('<div class="delete" style="position: absolute; right: 0; top: 0;"><a href="javascript:void(0);" class="deleteColomn">X</a></div>')}),$(".formbuilder").on("mouseleave",".colomn",function(){$(this).find("div.delete").remove()}),$(".formbuilder").on("click",".deleteColomn",function(e){e.preventDefault(),tCol=$(this).parent().parent();var a=tCol.parent().find("div.colomn").length;if(a--,a>0){var t="col-md-"+Math.floor(12/a),l=tCol.parent().find("div.colomn");l.removeClass("col-md-1"),l.removeClass("col-md-2"),l.removeClass("col-md-3"),l.removeClass("col-md-4"),l.removeClass("col-md-5"),l.removeClass("col-md-6"),l.removeClass("col-md-7"),l.removeClass("col-md-8"),l.removeClass("col-md-9"),l.removeClass("col-md-10"),l.removeClass("col-md-11"),l.removeClass("col-md-12"),l.addClass(t)}tCol.remove()}),$(".formbuilder").on("mouseenter",".row",function(){$(this).append('<div class="delete" style="position: absolute; right: 0; top: 0;"><a href="javascript:void(0);" class="deleteRow">X</a></div>')}),$(".formbuilder").on("mouseleave",".row",function(){$(this).find("div.delete").remove()}),$(".formbuilder").on("click",".deleteRow",function(e){e.preventDefault(),$(this).parent().parent().remove()}),$(".formbuilder").on("mouseenter","section",function(){$(this).append('<div class="delete" style="position: absolute; right: 0; top: 0;"><a href="javascript:void(0);" class="deleteSection">X</a></div>')}),$(".formbuilder").on("mouseleave","section",function(){$(this).find("div.delete").remove()}),$(".formbuilder").on("click",".deleteSection",function(e){e.preventDefault(),$(this).parent().parent().remove()})}})}(jQuery);